<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:Atlas.UI.ViewModels"
             x:Class="Atlas.UI.Views.AiPanelView"
             x:DataType="vm:AiPanelViewModel">

    <Border Classes="card" Padding="12">
        <Grid RowDefinitions="Auto,Auto,*,Auto" RowSpacing="10">
            <Grid ColumnDefinitions="*,Auto" Grid.Row="0">
                <TextBlock Text="AI Assistant" FontSize="14" FontWeight="SemiBold"/>
                <TextBlock Grid.Column="1" Text="⋯" Classes="secondary" VerticalAlignment="Center" Margin="8,0,0,0"/>
            </Grid>

            <TextBlock Grid.Row="1" Text="{Binding ContextTitle}" Classes="secondary"/>

            <StackPanel Grid.Row="2" Spacing="10">
                <ItemsControl ItemsSource="{Binding Actions}">
                    <ItemsControl.ItemTemplate>
                        <DataTemplate x:DataType="vm:AiActionItem">
                            <Button Content="{Binding Title}" Command="{Binding Command}" Padding="10,8"/>
                        </DataTemplate>
                    </ItemsControl.ItemTemplate>
                </ItemsControl>

                <Border Classes="card" Background="{DynamicResource AppPanelBackgroundAltBrush}" Padding="10">
                    <TextBox Text="{Binding Output}"
                             AcceptsReturn="True"
                             IsReadOnly="True"
                             BorderThickness="0"
                             Background="Transparent"
                             MinHeight="200"/>
                </Border>
            </StackPanel>

            <Grid Grid.Row="3" ColumnDefinitions="*,Auto,Auto" ColumnSpacing="8">
                <Button Classes="primary"
                        Content="Insert Plan →"
                        Padding="10,8"
                        Command="{Binding InsertDraftCommand}"/>
                <Button Grid.Column="1"
                        Content="Copy"
                        Padding="10,8"
                        Command="{Binding CopyCommand}"/>
                <Button Grid.Column="2"
                        Content="Close"
                        Padding="10,8"
                        Command="{Binding CloseCommand}"/>
            </Grid>
        </Grid>
    </Border>
</UserControl>


